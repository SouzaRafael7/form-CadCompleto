<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Cadastro</title>
    <style>
        form {
            display: flex;
            flex-direction: column;
            max-width: 400px;
            margin: auto;
        }
        input {
            margin: 10px 0;
            padding: 10px;
            font-size: 16px;
        }
        .message {
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <form id="formLogin">
        <input type="text" id="name" placeholder="Nome" required>
        <input type="email" id="email" placeholder="E-mail" required>
        <input type="password" id="password" placeholder="Senha" required>
        <input type="text" id="cpf" placeholder="CPF" required>
        <input type="date" id="dob" placeholder="Data de Nascimento" required>
        <button type="submit">Enviar</button>
        <div id="message" class="message"></div>
    </form>

    <script>
        const loginForm = document.getElementById('formLogin');

        loginForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Impede o envio padrão do formulário

            const nameInput = document.getElementById('name').value;
            const emailInput = document.getElementById('email').value;
            const passwordInput = document.getElementById('password').value;
            const cpfInput = document.getElementById('cpf').value;
            const dobInput = document.getElementById('dob').value;
            const msg = document.getElementById('message');

            // Validação de campos
            if (!nameInput || !emailInput || !passwordInput || !cpfInput || !dobInput) {
                msg.textContent = 'Por favor, preencha todos os campos.';
                msg.style.color = 'red';
                return;
            }

            if (!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(emailInput)) {
                msg.textContent = 'Por favor, digite um e-mail válido.';
                msg.style.color = 'red';
                return;
            }

            if (!validarCPF(cpfInput)) {
                msg.textContent = 'CPF inválido.';
                msg.style.color = 'red';
                return;
            }

            // Verifica se a data de nascimento é válida
            const birthDate = new Date(dobInput);
            const today = new Date();
            if (birthDate >= today) {
                msg.textContent = 'Data de nascimento inválida.';
                msg.style.color = 'red';
                return;
            }

            // Se todas as validações passarem, redireciona para outra página
            window.location.href = 'endereco.html'; // Substitua pelo URL desejado
        });

        function validarCPF(cpf) {
            cpf = cpf.replace(/\D/g, '');

            if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) {
                return false;
            }

            let soma = 0;
            let resto;

            for (let i = 1; i <= 9; i++) {
                soma += parseInt(cpf.charAt(i - 1)) * (11 - i);
            }
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) {
                resto = 0;
            }
            if (resto !== parseInt(cpf.charAt(9))) {
                return false;
            }

            soma = 0;

            for (let i = 1; i <= 10; i++) {
                soma += parseInt(cpf.charAt(i - 1)) * (12 - i);
            }
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) {
                resto = 0;
            }
            return resto === parseInt(cpf.charAt(10));
        }
    </script>

</body>
</html>
